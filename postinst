#!/bin/bash

#  Copyright (C) 2016-2017  Rafael Senties Martinelli
#
#  This program is free software; you can redistribute it and/or modify
#   it under the terms of the GNU General Public License 3 as published by
#   the Free Software Foundation.
#
#  This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
#   along with this program; if not, write to the Free Software Foundation,
#   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA.


if [ -f /bin/systemctl ]; then
	echo "Enabling and starting systemd..."
    systemctl enable alienware-kbl
    systemctl start alienware-kbl
else
	echo -e "\e[00;31m Warning: systemd seems to be missing. Alienware-KBL will not work.\e[00m"
fi

echo "Linking the python bindings..."
if [ ! -d /usr/lib/python3 ]; then
    mkdir /usr/lib/python3
fi

python_versions=("python3" "python3.4" "python3.5" "python3.6")

for python_version in "${python_versions[@]}"; do
    if [ -d /usr/lib/$python_version ]; then
        ln -s /usr/share/AlienwareKBL/Bindings.py /usr/lib/$python_version/AKBL.py
        echo "Python3 linked."
    fi
done
